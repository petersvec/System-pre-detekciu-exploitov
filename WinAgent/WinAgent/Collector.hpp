#pragma once

#include <string>
#include <vector>
#include <Windows.h>

#include "Configuration.hpp"

// globalny zoznam kolektorov
class Collector;
extern std::vector<Collector> collectors;

class Collector {
private:
	// ip adresa a port kolektora
	std::string mIPAddress;
	std::string mPort;

	// timeout(v ms)
	DWORD mTimeout{ 5000 };

	// info o spustanom procese
	STARTUPINFO startupInfo;
	PROCESS_INFORMATION processInfo;

	void closeHandles();
public:
	Collector(const std::string &ip, const std::string &port);

	// poslanie dat na kolektor
	bool send(const Configuration &configuration);
};